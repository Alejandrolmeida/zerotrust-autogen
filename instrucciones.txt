/*
ğŸ—ï¸  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   SUPER-PROMPT PARA GITHUB COPILOT
   Proyecto:  Landing Zone Express (demo Global Azure 2025)
   Autor:     Alejandro Almeida (MVP Azure & AI)
   Objetivo:  Crear una soluciÃ³n â€œmulti-agenteâ€ con Magentic-One
              que despliegue y supervise una Azure Enterprise
              Landing Zone aplicando principios Zero Trust
              SIN licencias Entra ID P1/P2 (solo Basic).

ğŸ› ï¸  1. STACK & DEPENDENCIAS
   â€“ python >= 3.11  (asyncio nativo)
   â€“ autogen-agentchat >= 0.4
     autogen-ext[magentic-one,openai]
   â€“ azure-identity, azure-mgmt-resourceâ€ƒâ€ƒâ€ƒ# SDK gestiÃ³n
   â€“ azure-cli v2 (invocado vÃ­a subprocess)
   â€“ bicep >= 0.25 (plantillas infra)
   â€“ playwright + chromiumâ€ƒ # requerido por WebSurfer
   â€“ pytest-asyncio para tests

ğŸ“  2. ESTRUCTURA DE CARPETAS PROPUESTA
   landing-zone-express/
   â”œâ”€â”€ main.py               # entry-point CLI (â€œlze â€¦â€)
   â”œâ”€â”€ agents/
   â”‚   â”œâ”€â”€ orchestrator.py   # MagenticOneGroupChat wrapper
   â”‚   â”œâ”€â”€ deploy_agent.py   # interactÃºa con Azure CLI/Bicep
   â”‚   â”œâ”€â”€ policy_agent.py   # aplica Azure Policy & RBAC
   â”‚   â””â”€â”€ monitor_agent.py  # analiza logs y alertas
   â”œâ”€â”€ infra/
   â”‚   â”œâ”€â”€ core.bicep        # landing-zone mÃ­nima (hub/spoke, NSG, GWâ€¦)
   â”‚   â””â”€â”€ policies/
   â”‚       â”œâ”€â”€ zero-trust.json
   â”‚       â””â”€â”€ tagging.json
   â”œâ”€â”€ requirements.txt
   â”œâ”€â”€ README.md
   â””â”€â”€ tests/
       â””â”€â”€ test_e2e.py

ğŸ§   3. LÃ“GICA / COMPORTAMIENTO
   a) main.py expone una CLI bÃ¡sica:
      $ python main.py deploy --subscription <id> --env prod
      $ python main.py audit  --rg <nombre-rg>
   b) orchestrator.py usa MagenticOneGroupChat como â€œteam driverâ€.
      â€“ Orchestrator descompone la tarea (deploy, audit, remediateâ€¦)
      â€“ DelegarÃ¡ subtareas en:
        â€¢ DeployAgent  â†’ invoca Azure CLI/Bicep
        â€¢ PolicyAgent  â†’ asigna definiciones & iniciativas
        â€¢ MonitorAgent â†’ consulta Azure Monitor y Advisor
   c) Cada agente hereda de la clase AssistantAgent o MagenticOneCoderAgent,
      define un â€œsystem_promptâ€ claro con su rol y autoriza solo
      los comandos Shell/Azure que necesita (principio de mÃ­nimo privilegio).
   d) Zero Trust core (sin Entra ID Premium):
      â€“ RBAC: Owner/Contributor solo para identidad de orquestaciÃ³n.
      â€“ PolÃ­ticas obligatorias: â€œDeny Public IPâ€, â€œRequire TLS 1.2â€, â€œASC Defaultâ€.
      â€“ Network: NSG + UDR bloqueando trÃ¡fico lateral; Activar Just-in-Time en VMs.
      â€“ Identidad: managed-identity + access tokens, no secretos planos.
   e) Al finalizar un despliegue, MonitorAgent debe:
      â€“ Ejecutar â€œaz security assessment list --query â€¦â€ y
        generar un informe Markdown guardado en ./reports/YYYY-MM-DD-HH-MM.md.
      â€“ Si encuentra â€œhighSeverityâ€: abrir GitHub Issue vÃ­a REST (placeholder).

ğŸ”„  4. FLUJO ASÃNCRONO SUGERIDO
   1. main.py parsea args, crea OpenAIChatCompletionClient (model="gpt-4o").
   2. Instancia el team MagenticOneGroupChat([Deploy, Policy, Monitor]).
   3. Orchestrator.run_stream(task=â€œDeploy landing zone <env>â€) until done.
   4. Devuelve exit code 0/1 segÃºn Ã©xito.

âœ…  5. PRUEBAS RÃPIDAS (pytest-asyncio)
   â€“ test_landing_zone_deploy(): asegura que el RG y polÃ­ticas existen.
   â€“ test_zero_trust_controls(): verifica reglas NSG y tag â€œownerâ€.
   â€“ mock_openai=True para ejecutar pruebas sin llamadas reales.

ğŸ’¡  6. ESTILO & CALIDAD
   â€“ typing + PEP-695 â€œ|â€ unions
   â€“ logging INFO por agente; DEBUG opcional (flag --verbose)
   â€“ guÃ­a flake8 + ruff + pre-commit
   â€“ README debe incluir diagrama ASCII de la arquitectura.

Copilot, sigue estas directrices para generar los ficheros. Empieza creando requirements.txt y main.py con la CLI bÃ¡sica y los agentes esqueleto, luego completa la lÃ³gica interna. MantÃ©n el cÃ³digo modular y documentado. Incluye TODO: markers donde sea necesario mÃ¡s detalle.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
